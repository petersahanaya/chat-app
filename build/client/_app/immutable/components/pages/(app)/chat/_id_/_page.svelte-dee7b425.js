import{S as se,i as le,s as re,k as E,a as q,q as ne,w as X,T as ae,l as I,h as g,c as G,m as T,r as oe,x as Z,n as d,G as w,b as S,y as $,u as ie,f as N,t as R,d as x,z as ee,H as U,_ as ce,j as ue,R as z,e as F,g as te,W as fe,Y as he,$ as me}from"../../../../../chunks/index-d2d958bb.js";import{p as de}from"../../../../../chunks/stores-e429b1a2.js";import{s as _e,c as ge}from"../../../../../chunks/chat-b3402a2a.js";import"../../../../../chunks/IconBase-c373613c.js";import{F as pe,C as we}from"../../../../../chunks/Footer-0e12ca97.js";function Y(o,e,r){const t=o.slice();return t[14]=e[r],t[16]=r,t}function B(o){let e,r;return{c(){e=E("img"),this.h()},l(t){e=I(t,"IMG",{class:!0,width:!0,src:!0,alt:!0}),this.h()},h(){d(e,"class","rounded-full"),d(e,"width","60"),z(e.src,r="/profile.jpeg")||d(e,"src",r),d(e,"alt","profile")},m(t,i){S(t,e,i)},d(t){t&&g(e)}}}function J(o){let e,r;return{c(){e=E("img"),this.h()},l(t){e=I(t,"IMG",{class:!0,width:!0,src:!0,alt:!0}),this.h()},h(){d(e,"class","rounded-full"),d(e,"width","60"),z(e.src,r=o[3].image)||d(e,"src",r),d(e,"alt","profile")},m(t,i){S(t,e,i)},p(t,i){i&8&&!z(e.src,r=t[3].image)&&d(e,"src",r)},d(t){t&&g(e)}}}function K(o){let e=[],r=new Map,t,i,a=o[1];const m=n=>n[16]+n[1].length;for(let n=0;n<a.length;n+=1){let s=Y(o,a,n),f=m(s);r.set(f,e[n]=Q(f,s))}return{c(){for(let n=0;n<e.length;n+=1)e[n].c();t=F()},l(n){for(let s=0;s<e.length;s+=1)e[s].l(n);t=F()},m(n,s){for(let f=0;f<e.length;f+=1)e[f].m(n,s);S(n,t,s),i=!0},p(n,s){s&18&&(a=n[1],te(),e=fe(e,s,m,1,n,a,r,t.parentNode,he,Q,t,Y),x())},i(n){if(!i){for(let s=0;s<a.length;s+=1)N(e[s]);i=!0}},o(n){for(let s=0;s<e.length;s+=1)R(e[s]);i=!1},d(n){for(let s=0;s<e.length;s+=1)e[s].d(n);n&&g(t)}}}function Q(o,e){let r,t,i;return t=new we({props:{result:e[14],user:e[4]}}),{key:o,first:null,c(){r=F(),X(t.$$.fragment),this.h()},l(a){r=F(),Z(t.$$.fragment,a),this.h()},h(){this.first=r},m(a,m){S(a,r,m),$(t,a,m),i=!0},p(a,m){e=a;const n={};m&2&&(n.result=e[14]),t.$set(n)},i(a){i||(N(t.$$.fragment,a),i=!0)},o(a){R(t.$$.fragment,a),i=!1},d(a){a&&g(r),ee(t,a)}}}function be(o){var L,O,P;let e,r,t,i,a,m,n,s,f,_=((L=o[3])==null?void 0:L.username)+"",D,y,b,j,k,M,l=!((O=o[3])!=null&&O.image)&&B(),c=((P=o[3])==null?void 0:P.image)&&J(o),h=o[1].length&&K(o);return k=new pe({props:{handleSend:o[5],handleChange:o[6],handleInput:o[7],input:o[0]}}),{c(){e=E("meta"),r=q(),t=E("main"),i=E("header"),a=E("section"),l&&l.c(),m=q(),c&&c.c(),n=q(),s=E("div"),f=E("h4"),D=ne(_),y=q(),b=E("article"),h&&h.c(),j=q(),X(k.$$.fragment),this.h()},l(u){const p=ae("svelte-4r789v",document.head);e=I(p,"META",{name:!0,content:!0}),p.forEach(g),r=G(u),t=I(u,"MAIN",{class:!0});var v=T(t);i=I(v,"HEADER",{class:!0});var C=T(i);a=I(C,"SECTION",{});var H=T(a);l&&l.l(H),m=G(H),c&&c.l(H),H.forEach(g),n=G(C),s=I(C,"DIV",{class:!0});var A=T(s);f=I(A,"H4",{class:!0});var V=T(f);D=oe(V,_),V.forEach(g),A.forEach(g),C.forEach(g),y=G(v),b=I(v,"ARTICLE",{class:!0});var W=T(b);h&&h.l(W),W.forEach(g),j=G(v),Z(k.$$.fragment,v),v.forEach(g),this.h()},h(){document.title="Chat's",d(e,"name","description"),d(e,"content","you can chat with you'r friend anywhere"),d(f,"class","text-[greenyellow] text-[1.3rem] font-medium"),d(s,"class","flex flex-col justify-center "),d(i,"class","flex justify-around items-center p-2 w-screen h-[10vh] bg-stone-800 shadow-md shadow-white"),d(b,"class","bg-stone-800 w-screen h-screen overflow-y-scroll overflow-x-hidden pb-32"),d(t,"class","w-screem screen bg-stone-800")},m(u,p){w(document.head,e),S(u,r,p),S(u,t,p),w(t,i),w(i,a),l&&l.m(a,null),w(a,m),c&&c.m(a,null),w(i,n),w(i,s),w(s,f),w(f,D),w(t,y),w(t,b),h&&h.m(b,null),o[11](b),w(t,j),$(k,t,null),M=!0},p(u,[p]){var C,H,A;(C=u[3])!=null&&C.image?l&&(l.d(1),l=null):l||(l=B(),l.c(),l.m(a,m)),(H=u[3])!=null&&H.image?c?c.p(u,p):(c=J(u),c.c(),c.m(a,null)):c&&(c.d(1),c=null),(!M||p&8)&&_!==(_=((A=u[3])==null?void 0:A.username)+"")&&ie(D,_),u[1].length?h?(h.p(u,p),p&2&&N(h,1)):(h=K(u),h.c(),N(h,1),h.m(b,null)):h&&(te(),R(h,1,1,()=>{h=null}),x());const v={};p&1&&(v.input=u[0]),k.$set(v)},i(u){M||(N(h),N(k.$$.fragment,u),M=!0)},o(u){R(h),R(k.$$.fragment,u),M=!1},d(u){g(e),u&&g(r),u&&g(t),l&&l.d(),c&&c.d(),h&&h.d(),o[11](null),ee(k)}}}function ke(o,e,r){let t,i,a,m;U(o,_e,l=>r(13,i=l)),U(o,de,l=>r(9,a=l)),U(o,ge,l=>r(10,m=l));let{data:n}=e,s="",f=[],_,D;ce(()=>{D=_&&_.scrollHeight+_.scrollTop>_.scrollHeight-1}),ue(()=>{D&&_.scrollTo(0,_.scrollHeight)});const{user:y}=n;i.on("send-msg",l=>{r(1,f=[...f,l])});const b=()=>{if(s){const l={senderName:y.username,senderImg:y.image,senderMsg:s,receiverId:t.id,date:`${new Date(Date.now()).getHours()} : ${new Date(Date.now()).getMinutes()}`};i.emit("on-msg",l),r(1,f=[...f,l]),r(0,s="")}},j=l=>{r(0,s=l.target.value)},k=l=>{if(s&&l.key==="Enter"){const c={senderName:y.username,senderImg:y.image,senderMsg:s,receiverId:t.id,date:`${new Date(Date.now()).getHours()} : ${new Date(Date.now()).getMinutes()}`};i.emit("on-msg",c),r(1,f=[...f,c]),r(0,s="")}};function M(l){me[l?"unshift":"push"](()=>{_=l,r(2,_)})}return o.$$set=l=>{"data"in l&&r(8,n=l.data)},o.$$.update=()=>{o.$$.dirty&1536&&r(3,t=m.find(l=>{var c;return l.id===((c=a.params)===null||c===void 0?void 0:c.id)}))},[s,f,_,t,y,b,j,k,n,a,m,M]}class Me extends se{constructor(e){super(),le(this,e,ke,be,re,{data:8})}}export{Me as default};
