{"version":3,"file":"2-83d86640.js","sources":["../../../.svelte-kit/adapter-node/entries/pages/(app)/_layout.server.ts.js","../../../.svelte-kit/adapter-node/nodes/2.js"],"sourcesContent":["import { r as redirect } from \"../../../chunks/index2.js\";\nimport { R as REFRESH_TOKEN, A as ACCESS_TOKEN } from \"../../../chunks/private.js\";\nimport JWT from \"jsonwebtoken\";\nconst load = async ({ cookies }) => {\n  const token = cookies.get(\"token\") || \"\";\n  const refreshToken = cookies.get(\"refreshToken\") || \"\";\n  let user;\n  if (!token && refreshToken) {\n    JWT.verify(refreshToken, REFRESH_TOKEN, (err, decoded) => {\n      console.log(decoded);\n      if (err)\n        throw redirect(307, \"/auth/register\");\n      const accessToken = JWT.sign(\n        {\n          username: decoded.username,\n          id: decoded.id,\n          email: decoded.email,\n          image: decoded.image,\n          userId: decoded.userId\n        },\n        ACCESS_TOKEN,\n        { expiresIn: \"15m\" }\n      );\n      cookies.set(\"token\", accessToken, {\n        path: \"/\",\n        httpOnly: true,\n        expires: new Date(Date.now() + 1e3 * 60 * 15)\n      });\n      user = decoded;\n    });\n    return {\n      user\n    };\n  }\n  if (!token && !refreshToken)\n    throw redirect(307, \"/auth/register\");\n  if (token && refreshToken) {\n    JWT.verify(token, ACCESS_TOKEN, (err, decoded) => {\n      console.log(err == null ? void 0 : err.message);\n      if (err)\n        return console.log(\"Error access Token redirected..\");\n      user = decoded;\n    });\n  }\n  return {\n    user\n  };\n};\nexport {\n  load\n};\n","import * as server from '../entries/pages/(app)/_layout.server.ts.js';\n\nexport const index = 2;\nexport const component = async () => (await import('../entries/fallbacks/layout.svelte.js')).default;\nexport const file = '_app/immutable/components/layout.svelte-dd63eb73.js';\nexport { server };\nexport const imports = [\"_app/immutable/components/layout.svelte-dd63eb73.js\",\"_app/immutable/chunks/index-d2d958bb.js\"];\nexport const stylesheets = [];\nexport const fonts = [];\n"],"names":[],"mappings":";;;;AAGA,MAAM,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,KAAK;AACpC,EAAE,MAAM,KAAK,GAAG,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC;AAC3C,EAAE,MAAM,YAAY,GAAG,OAAO,CAAC,GAAG,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC;AACzD,EAAE,IAAI,IAAI,CAAC;AACX,EAAE,IAAI,CAAC,KAAK,IAAI,YAAY,EAAE;AAC9B,IAAI,GAAG,CAAC,MAAM,CAAC,YAAY,EAAE,aAAa,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK;AAC9D,MAAM,OAAO,CAAC,GAAG,CAAC,OAAO,CAAC,CAAC;AAC3B,MAAM,IAAI,GAAG;AACb,QAAQ,MAAM,QAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;AAC9C,MAAM,MAAM,WAAW,GAAG,GAAG,CAAC,IAAI;AAClC,QAAQ;AACR,UAAU,QAAQ,EAAE,OAAO,CAAC,QAAQ;AACpC,UAAU,EAAE,EAAE,OAAO,CAAC,EAAE;AACxB,UAAU,KAAK,EAAE,OAAO,CAAC,KAAK;AAC9B,UAAU,KAAK,EAAE,OAAO,CAAC,KAAK;AAC9B,UAAU,MAAM,EAAE,OAAO,CAAC,MAAM;AAChC,SAAS;AACT,QAAQ,YAAY;AACpB,QAAQ,EAAE,SAAS,EAAE,KAAK,EAAE;AAC5B,OAAO,CAAC;AACR,MAAM,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE;AACxC,QAAQ,IAAI,EAAE,GAAG;AACjB,QAAQ,QAAQ,EAAE,IAAI;AACtB,QAAQ,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC;AACrD,OAAO,CAAC,CAAC;AACT,MAAM,IAAI,GAAG,OAAO,CAAC;AACrB,KAAK,CAAC,CAAC;AACP,IAAI,OAAO;AACX,MAAM,IAAI;AACV,KAAK,CAAC;AACN,GAAG;AACH,EAAE,IAAI,CAAC,KAAK,IAAI,CAAC,YAAY;AAC7B,IAAI,MAAM,QAAQ,CAAC,GAAG,EAAE,gBAAgB,CAAC,CAAC;AAC1C,EAAE,IAAI,KAAK,IAAI,YAAY,EAAE;AAC7B,IAAI,GAAG,CAAC,MAAM,CAAC,KAAK,EAAE,YAAY,EAAE,CAAC,GAAG,EAAE,OAAO,KAAK;AACtD,MAAM,OAAO,CAAC,GAAG,CAAC,GAAG,IAAI,IAAI,GAAG,KAAK,CAAC,GAAG,GAAG,CAAC,OAAO,CAAC,CAAC;AACtD,MAAM,IAAI,GAAG;AACb,QAAQ,OAAO,OAAO,CAAC,GAAG,CAAC,iCAAiC,CAAC,CAAC;AAC9D,MAAM,IAAI,GAAG,OAAO,CAAC;AACrB,KAAK,CAAC,CAAC;AACP,GAAG;AACH,EAAE,OAAO;AACT,IAAI,IAAI;AACR,GAAG,CAAC;AACJ,CAAC;;;;;;;AC7CW,MAAC,KAAK,GAAG,EAAE;AACX,MAAC,SAAS,GAAG,YAAY,CAAC,MAAM,OAAO,6BAAuC,CAAC,EAAE,QAAQ;AACzF,MAAC,IAAI,GAAG,sDAAsD;AAE9D,MAAC,OAAO,GAAG,CAAC,qDAAqD,CAAC,yCAAyC,EAAE;AAC7G,MAAC,WAAW,GAAG,GAAG;AAClB,MAAC,KAAK,GAAG;;;;"}