{"version":3,"file":"_server.ts-96d2ebcf.js","sources":["../../../.svelte-kit/adapter-node/entries/endpoints/api/upload/_server.ts.js"],"sourcesContent":["import { U as User } from \"../../../../chunks/index4.js\";\nimport JWT from \"jsonwebtoken\";\nimport { A as ACCESS_TOKEN, R as REFRESH_TOKEN } from \"../../../../chunks/private.js\";\nconst POST = async ({ request, cookies }) => {\n  const body = await request.json();\n  console.log(body);\n  if (body) {\n    await User.update({ image: body.url }, { where: { username: body.username } });\n    const user = await User.findOne({ where: { username: body.username } });\n    const accessToken = JWT.sign({ username: user.username, id: user.id, email: user.email, image: user.image, userId: user.userId }, ACCESS_TOKEN, { expiresIn: \"15m\" });\n    const refreshToken = JWT.sign({ username: user.username, id: user.id, email: user.email, image: user.image, userId: user.userId }, REFRESH_TOKEN, { expiresIn: \"15m\" });\n    cookies.set(\"token\", accessToken, { path: \"/\", httpOnly: true, expires: new Date(Date.now() + 1e3 * 60 * 15) });\n    cookies.set(\"refreshToken\", refreshToken, { path: \"/\", httpOnly: true, expires: new Date(Date.now() + 1e3 * 60 * 60 * 24 * 30) });\n    return new Response(JSON.stringify(\"You profile is updated..\"), { status: 200 });\n  }\n};\nexport {\n  POST\n};\n"],"names":[],"mappings":";;;;;AAGK,MAAC,IAAI,GAAG,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,KAAK;AAC7C,EAAE,MAAM,IAAI,GAAG,MAAM,OAAO,CAAC,IAAI,EAAE,CAAC;AACpC,EAAE,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;AACpB,EAAE,IAAI,IAAI,EAAE;AACZ,IAAI,MAAM,IAAI,CAAC,MAAM,CAAC,EAAE,KAAK,EAAE,IAAI,CAAC,GAAG,EAAE,EAAE,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AACnF,IAAI,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,EAAE,KAAK,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,CAAC,CAAC;AAC5E,IAAI,MAAM,WAAW,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;AAC1K,IAAI,MAAM,YAAY,GAAG,GAAG,CAAC,IAAI,CAAC,EAAE,QAAQ,EAAE,IAAI,CAAC,QAAQ,EAAE,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,KAAK,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,MAAM,EAAE,EAAE,aAAa,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,CAAC,CAAC;AAC5K,IAAI,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,WAAW,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACpH,IAAI,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,YAAY,EAAE,EAAE,IAAI,EAAE,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,OAAO,EAAE,IAAI,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,GAAG,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;AACtI,IAAI,OAAO,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,0BAA0B,CAAC,EAAE,EAAE,MAAM,EAAE,GAAG,EAAE,CAAC,CAAC;AACrF,GAAG;AACH;;;;"}